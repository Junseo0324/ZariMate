# 자리있니? (ZariMate) - Product Requirements Document

## 1. 프로젝트 개요

### 제품 정보
- **제품명**: 자리있니? (ZariMate)
- **플랫폼**: Android (Jetpack Compose)
- **목표**: 공공도서관 열람실 좌석 정보를 실시간으로 제공하여 수험생과 학생들의 불필요한 이동 시간 절약

### 핵심 가치
- ⏱️ 도서관 방문 전 실시간 좌석 확인으로 헛걸음 방지
- 📍 내 주변 도서관 자동 검색
- 🔖 자주 가는 도서관 즐겨찾기
- 🎯 "좌석이 있는가?"에만 집중하는 단순한 UX

### 타겟 유저
- **Primary**: 매일 도서관 출석하는 고등학생 & 수험생 (일 1-3회 사용)
- **Secondary**: 주말/시험기간 도서관 이용하는 대학생 & 직장인 (주 1-2회 사용)

---

## 2. 데이터 소스

### API 정보
- **API명**: 행정안전부 - 공공도서관 열람실 실시간 정보
- **API ID**: 15142580
- **제공 데이터**:
    - 도서관 목록 및 기본 정보
    - 도서관 상세 정보 (주소, 연락처, 운영시간)
    - 열람실별 실시간 좌석 현황 (총 좌석, 사용 중, 잔여)

---

## 3. 핵심 기능 (MVP)

### 3.1 도서관 검색 및 목록
**해야 할 작업**
- [ ] 사용자 현재 위치 권한 요청 및 획득
- [ ] 위치 기반 주변 도서관 API 호출
- [ ] 도서관명/지역명 검색 기능 구현
- [ ] 도서관 목록 리스트 UI 구성
- [ ] 거리순 정렬 기본 적용
- [ ] 좌석 잔여율순 정렬 옵션 추가

**UI 구성**
- 검색창 (상단)
- 정렬 필터 칩
- 도서관 카드 리스트 (LazyColumn)

### 3.2 실시간 좌석 현황
**해야 할 작업**
- [ ] 좌석 정보 API 호출 및 파싱
- [ ] 좌석 상태별 색상 코드 정의 (여유/보통/혼잡/만석)
- [ ] 좌석 잔여율 시각화 (프로그레스 바)
- [ ] Pull-to-Refresh 구현
- [ ] 30초 간격 자동 갱신 (화면 활성 시에만)
- [ ] 네트워크 에러 처리 및 재시도 UI

**좌석 상태 표시 규칙**
- 🟢 여유: 잔여율 30% 이상
- 🟡 보통: 잔여율 10-30%
- 🔴 혼잡: 잔여율 10% 미만
- ⚫ 만석: 잔여 좌석 0

### 3.3 즐겨찾기
**해야 할 작업**
- [ ] Room Database 설정 및 Entity 정의
- [ ] 즐겨찾기 추가/제거 기능
- [ ] 즐겨찾기 목록 별도 화면 구성
- [ ] 즐겨찾기 도서관 우선 표시 옵션
- [ ] 즐겨찾기 상태 실시간 동기화

### 3.4 도서관 상세 정보
**해야 할 작업**
- [ ] 도서관 상세 화면 구성
- [ ] 기본 정보 표시 (주소, 전화번호, 운영시간)
- [ ] 지도 위치 표시 (Kakao/Naver Map SDK 연동)
- [ ] 전화 걸기 Intent 연결
- [ ] 길찾기 Intent 연결 (지도앱 선택)
- [ ] 열람실별 좌석 현황 상세 리스트

---

## 4. 화면 구성

### 네비게이션 구조
```
BottomNavigation (3개 탭)
├── 홈 - 주변 도서관 목록
├── 즐겨찾기 - 즐겨찾기한 도서관
└── 설정 - 앱 설정
```

### 주요 화면 및 작업

#### 화면 1: 홈 (도서관 목록)
**구성 요소**
- TopAppBar (앱 제목)
- 검색창
- 정렬 필터 (거리순/좌석 잔여율순)
- 도서관 카드 리스트
    - 도서관명
    - 거리 표시
    - 전체 좌석 요약 (총/사용/잔여)
    - 좌석 잔여율 프로그레스 바
    - 즐겨찾기 아이콘

**작업 목록**
- [ ] TopAppBar 구현
- [ ] SearchBar 컴포넌트 구현
- [ ] FilterChip 그룹 구현
- [ ] LibraryCard 컴포넌트 디자인 및 구현
- [ ] LazyColumn 무한 스크롤 (필요시)
- [ ] 빈 목록 상태 UI

#### 화면 2: 도서관 상세
**구성 요소**
- TopAppBar (뒤로가기, 즐겨찾기 버튼)
- 전체 좌석 요약 카드
- 열람실별 좌석 현황 리스트
- 도서관 정보 섹션 (주소, 전화, 운영시간)
- 액션 버튼 (전화 걸기, 길찾기)

**작업 목록**
- [ ] 상세 화면 레이아웃 구성
- [ ] 전체 좌석 요약 카드 구현
- [ ] 열람실 카드 컴포넌트 구현
- [ ] 도서관 정보 섹션 구현
- [ ] 전화/길찾기 Intent 연결
- [ ] 즐겨찾기 토글 기능

#### 화면 3: 즐겨찾기
**구성 요소**
- TopAppBar (제목)
- 즐겨찾기 도서관 리스트 (홈과 동일한 카드 형태)
- 빈 상태 UI (즐겨찾기 없을 때)

**작업 목록**
- [ ] 즐겨찾기 목록 화면 구현
- [ ] 빈 상태 UI 디자인 및 구현
- [ ] 즐겨찾기 삭제 기능 (스와이프 또는 길게 누르기)

#### 화면 4: 설정
**구성 요소**
- 자동 새로고침 간격 설정
- 다크 모드 설정
- 위치 권한 관리
- 앱 정보 (버전, 오픈소스 라이선스 등)

**작업 목록**
- [ ] 설정 화면 레이아웃
- [ ] DataStore로 설정값 저장/로드
- [ ] 다크모드 토글 및 적용
- [ ] 위치 권한 설정 화면 연결

---

## 5. 개발 단계별 작업

### Phase 1: 프로젝트 세팅 (1-2일)
- [ ] Android Studio 프로젝트 생성
- [ ] Jetpack Compose 설정
- [ ] Hilt 의존성 주입 설정
- [ ] Retrofit 네트워크 레이어 구성
- [ ] Room Database 설정
- [ ] 프로젝트 패키지 구조 설계

### Phase 2: API 연동 및 데이터 레이어 (2-3일)
- [ ] 공공데이터포털 API 키 발급
- [ ] API Service 인터페이스 정의
- [ ] Repository 패턴 구현
- [ ] API 응답 데이터 모델 정의
- [ ] API 호출 테스트 및 디버깅
- [ ] 에러 핸들링 구현

### Phase 3: 핵심 UI 구현 (3-4일)
- [ ] 네비게이션 구조 설정
- [ ] 홈 화면 UI 구현
- [ ] 도서관 카드 컴포넌트 구현
- [ ] 도서관 상세 화면 UI 구현
- [ ] 좌석 상태 시각화 컴포넌트

### Phase 4: 위치 및 검색 기능 (2-3일)
- [ ] 위치 권한 요청 플로우
- [ ] Google Play Services Location API 연동
- [ ] 거리 계산 로직 구현
- [ ] 검색 기능 구현
- [ ] 정렬 기능 구현

### Phase 5: 즐겨찾기 및 로컬 데이터 (2일)
- [ ] Room Database CRUD 구현
- [ ] 즐겨찾기 화면 구현
- [ ] 즐겨찾기 상태 동기화
- [ ] 로컬 데이터와 API 데이터 통합

### Phase 6: 지도 및 외부 연동 (2일)
- [ ] 지도 SDK 선택 및 설정
- [ ] 지도에 도서관 위치 표시
- [ ] 전화 걸기 Intent
- [ ] 길찾기 Intent (지도앱 연동)

### Phase 7: 설정 및 사용성 개선 (2일)
- [ ] 설정 화면 구현
- [ ] DataStore로 설정 저장
- [ ] 다크모드 구현
- [ ] Pull-to-Refresh 구현
- [ ] 자동 갱신 기능 구현

### Phase 8: 테스트 및 최적화 (2-3일)
- [ ] 네트워크 에러 시나리오 테스트
- [ ] 다양한 화면 크기 테스트
- [ ] 메모리 누수 확인
- [ ] 성능 최적화
- [ ] 사용자 플로우 테스트

### Phase 9: 배포 준비 (1-2일)
- [ ] ProGuard/R8 설정
- [ ] 앱 아이콘 및 스플래시 화면
- [ ] 스토어 스크린샷 준비
- [ ] 개인정보처리방침 작성
- [ ] Play Store 등록

---

## 6. 성공 지표 (Success Metrics)

### 런칭 후 1개월 목표
- **다운로드 수**: 1,000+
- **DAU (일일 활성 사용자)**: 300+
- **사용자 유지율**: 40% (7일 기준)
- **평균 세션 시간**: 2분
- **앱 크래시율**: 1% 미만

### 주요 추적 지표
- 도서관 검색 횟수
- 즐겨찾기 평균 개수
- 상세 화면 진입률
- 전화/길찾기 클릭률

---

## 7. 향후 개선 계획 (Post-MVP)

### Phase 2 기능
- [ ] 도서관 혼잡 시간대 통계 그래프
- [ ] 푸시 알림 (즐겨찾기 도서관 좌석 여유 시)
- [ ] 홈 화면 위젯
- [ ] 도서관 리뷰 및 별점 시스템
- [ ] 도서관 내부 사진 갤러리
- [ ] 좌석 예약 기능 (API 지원 시)

### 개선 아이디어
- 스터디 카페 정보 추가
- 사용자 커뮤니티 (스터디 그룹 매칭)
- 학습 시간 트래커
- 도서관별 인기 시간대 히트맵

---

## 8. 리스크 및 고려사항

### 기술적 리스크
- **API 응답 속도**: 공공 API의 응답 속도가 느릴 수 있음 → 로딩 인디케이터 및 타임아웃 처리 필수
- **API 데이터 정확성**: 실시간 데이터 동기화 지연 가능성 → 사용자에게 갱신 시간 명시
- **위치 권한 거부**: 사용자가 위치 권한 거부 시 → 수동 지역 선택 옵션 제공

### 비즈니스 리스크
- **타겟 유저 획득**: 초기 사용자 확보 전략 필요 (고등학교/학원가 홍보)
- **경쟁 앱 존재**: 유사 서비스 조사 및 차별화 포인트 강조
- **계절성**: 방학 기간 사용률 감소 예상 → 연중 사용 유도 전략 필요

### 해결 방안
- API 타임아웃 5초 설정 및 재시도 로직
- 캐싱 전략으로 네트워크 부하 감소
- 오프라인 모드 지원 (즐겨찾기 목록은 로컬에서 표시)
- 사용자 피드백 적극 수용 (인앱 피드백 기능)
